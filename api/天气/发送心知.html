<!--
 * @Descripttion: 
 * @version: 
 * @Author: Eugene
 * @Date: 2024-03-07 10:56:09
 * @LastEditors: Andy
 * @LastEditTime: 2024-04-11 17:29:39
-->
<!DOCTYPE html>
<html>

<head>
    <title>发送 HTTP 请求</title>
</head>

<body>
    <button onclick="sendFetchRequest()">发送请求</button>

    <script>
        //#region  fetch

        function sendFetchRequest() {

            var apiKey = 'STZM3wOV_mjH8QsjJ';
            var location = '上海';
            var language = 'zh-Hans';
            var unit = 'c';
            var params = {
                key: apiKey,
                location: location,
                language: language,
                unit: unit
            };
            var apiUrl = new URL("https://api.seniverse.com/v3/weather/now.json");
            var urlParams = new URLSearchParams(params)
            var data = {
                postData: 'your_data_here',
                anotherData: 'more_data'
            };

            var options = {
                method: 'POST',
                // headers: {
                //     'Content-Type': 'application/json'
                // },
                body: JSON.stringify(data)
            };

            var url = apiUrl + '?' + urlParams.toString();

            fetch(url, options)
                .then(response => {
                    if (response.status == 200) {
                        
                        return response.json();
                    } else {
                        throw new Error('Failed to fetch');
                    }
                })
                .then(data => {
                        console.log('data',data);
                    }
                )
                .catch(error => console.log(error));

            // var url = new URL("https://api.seniverse.com/v3/weather/now.json");
            // url.search = new URLSearchParams(params).toString();
            // var url =
            //     "https://api.seniverse.com/v3/weather/now.json?key=STZM3wOV_mjH8QsjJ&location=上海&language=zh-Hans&unit=c"

            // fetch(url)
            //     .then(response => response.json())
            //     .then(data => console.log(data)) // 在控制台中打印响应数据
            //     .catch(error => console.log(error));
        }

        //#endregion wrongGroupTotalEleInterStyle

        //#region  
        function sendHttpRequest() {
            var xhr = new XMLHttpRequest();
            var url =
                "https://api.seniverse.com/v3/weather/now.json?key=STZM3wOV_mjH8QsjJ&location=上海&language=zh-Hans&unit=c"

            xhr.onreadystatechange = function () {
                console.log('xhr', xhr.readyState, xhr.status);
                if (xhr.readyState === 4 && xhr.status === 200) {

                    var response = JSON.parse(xhr.responseText);
                    console.log(response); // 在控制台中打印响应数据
                }
            };

            xhr.open("GET", url, true);
            xhr.send();
        };
//         function isEqual(first,seconde){
//   //通过Object.keys（）的方法将对象键名转成数组
// const arr1 =Object.keys(first)
// const arr2 =Object.keys(seconde)
// //比较两个对象的长度，若长度不等，也就没必要进行后面的验证了，直接返回flse
// if (arr1.length !=arr2.length)return false
// //通过上面的验证后，遍历对象，看对象的值是否相等
// for(const k in first ){
//     if(typeof first[k] == 'object' || typeof seconde[k] == 'object'){
//         if(!isEqual(first[key],seconde[k])) return false
//     }eles if(first[k] !== seconde[k]) return false;
// }  
// return true;
// }
        //#endregion
    </script>
</body>

</html>